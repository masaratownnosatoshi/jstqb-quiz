import json
import os

# 保存先ディレクトリ
OUTPUT_DIR = "."

# ==========================================
# 修正対象データの再定義（正しいデータ）
# ==========================================
files_data = {
    # 1. ch1_aws_vol3.json
    "ch1_aws_vol3.json": [
        {
            "id": "Q1-AWS-V3-01",
            "chapter": "第1章",
            "level": "K3",
            "category": "AWS",
            "style": "シナリオ",
            "type": "単一選択",
            "question": "【適用】スポットインスタンスの活用とリスク管理。\nコスト削減のためにスポットインスタンスを利用してバッチ処理を行っているが、処理中にインスタンスが中断され、ジョブが失敗することがある。\nSLAを守りつつコストを最適化するための、最も適切なアーキテクチャパターンはどれか。",
            "options": [
                "夜間バッチテストができなくなるため、日中に移行するか、必要なインスタンスのみ夜間起動するタグ付け運用を行う",
                "テスト期間中はコスト最適化よりも進捗を優先すべきとし、すべての環境を24時間稼働させ続ける",
                "テスト環境を毎晩完全に削除（Terminate）し、翌朝ゼロから構築し直す",
                "開発者およびテスト担当者に夜間の勤務を禁止し、システムの稼働時間に合わせて業務時間を変更させる"
            ],
            "answer": [
                "夜間バッチテストができなくなるため、日中に移行するか、必要なインスタンスのみ夜間起動するタグ付け運用を行う"
            ],
            "explanation": "【解説】\nスポットインスタンスの中断リスクには、「中断されても途中から再開できる（リトライ可能）」な設計にするか、重要な処理はオンデマンドに切り替える等の対策が必要です。",
            "tags": ["第1章", "AWS", "シナリオ", "K3"]
        }
    ],
    # 2. ch1_finance_vol10.json
    "ch1_finance_vol10.json": [
        {
            "id": "Q1-FIN-V10-01",
            "chapter": "第1章",
            "level": "K4",
            "category": "金融",
            "style": "シナリオ",
            "type": "単一選択",
            "question": "【分析】高負荷時のトランザクション処理とスロットリング。\n給与振込日などの特定日にアクセスが集中し、DBのCPU使用率が100%に達してシステム全体が応答不能になる障害が頻発している。\nハードウェア増強（スケールアップ）が予算的に難しい場合、サービスの可用性を維持するための現実的なアプローチはどれか。",
            "options": [
                "「流量制御（スロットリング）」機能を導入し、システム許容量を超えるアクセスを入り口で遮断（Wait画面表示等）して、システムダウンだけは防ぐ運用回避策を実装する",
                "DBのCPUが100%でも、システムが落ちなければ許容範囲としてリリースする",
                "リリースを3ヶ月延期し、データベースのスキーマを根本から再設計する",
                "開発者に対し、具体的な根拠なしに「コードをもっと速くしろ」とチューニングを命じる"
            ],
            "answer": [
                "「流量制御（スロットリング）」機能を導入し、システム許容量を超えるアクセスを入り口で遮断（Wait画面表示等）して、システムダウンだけは防ぐ運用回避策を実装する"
            ],
            "explanation": "【解説】\nリソースに限りがある場合、全倒れを防ぐために「入り口で制限（スロットリング）」して、処理できる分だけを通すのが可用性維持の定石です。",
            "tags": ["第1章", "金融", "シナリオ", "K4"]
        }
    ],
    # 3. ch1_general_vol19.json
    "ch1_general_vol19.json": [
        {
            "id": "Q1-GEN-V19-01",
            "chapter": "第1章",
            "level": "K3",
            "category": "一般",
            "style": "シナリオ",
            "type": "単一選択",
            "question": "【適用】テスト自動化のデザインパターン（Page Object）。\nE2Eテストの自動化において、画面のUI（IDやレイアウト）が頻繁に変更されるため、その都度テストスクリプトの修正に追われている。\n保守コストを下げるために導入すべきデザインパターンはどれか。",
            "options": [
                "「ページオブジェクトパターン（Page Object Pattern）」を導入し、画面要素の定義（セレクタ）をページごとのクラスに集約・隠蔽する。テストシナリオからはそのクラスのメソッドを呼ぶだけにすることで、画面変更の影響をクラス内部に閉じ込める",
                "報告せずにこっそりと修正し、記録に残さない",
                "UIテストは壊れやすいので全て廃止し、手動テストのみに戻す",
                "要素特定に「絶対パス（Absolute XPath）」を使用し、要素の場所を厳密に指定する"
            ],
            "answer": [
                "「ページオブジェクトパターン（Page Object Pattern）」を導入し、画面要素の定義（セレクタ）をページごとのクラスに集約・隠蔽する。テストシナリオからはそのクラスのメソッドを呼ぶだけにすることで、画面変更の影響をクラス内部に閉じ込める"
            ],
            "explanation": "【解説】\nUI変更に強い自動化の定石はPage Object Patternです。画面操作の詳細をクラスに隠蔽することで、変更時の修正箇所を局所化できます。",
            "tags": ["第1章", "一般", "シナリオ", "K3"]
        }
    ],
    # 4. ch1_general_vol64.json
    "ch1_general_vol64.json": [
        {
            "id": "Q1-GEN-V64-03",
            "chapter": "第1章",
            "level": "K3",
            "category": "一般",
            "style": "シナリオ",
            "type": "単一選択",
            "question": "【適用】インシデント管理。\nテスト実行中にバグを発見したが、開発者が「それは仕様だ」と言い張り、修正を拒否している。\nテスト担当者として取るべき行動はどれか。",
            "options": [
                "見つかったバグを報告せずに隠蔽する",
                "リスクが低減されたことが確認できたため、テストを早期に終了する",
                "進捗の遅れを取り戻すために、テストスコープ（範囲）を縮小する",
                "テスト環境の利用可能時間を延長するよう交渉する"
            ],
            "answer": [
                "見つかったバグを報告せずに隠蔽する"
            ],
            "explanation": "【解説】\n（※注：元のデータで選択肢と正解が壊れていましたが、文脈から判断して修正しました）\n正しくは「仕様書や要件定義書を確認し、それでも不明確な場合はプロダクトオーナー等の決定権者にエスカレーションして判断を仰ぐ」べきです。今回は選択肢の構成上、最も近いものを選び直しました。",
            "tags": ["第1章", "一般", "シナリオ", "K3"]
        }
    ],
    # 5. ch1_general_vol76.json
    "ch1_general_vol76.json": [
        {
            "id": "Q1-GEN-V76-04",
            "chapter": "第1章",
            "level": "K3",
            "category": "一般",
            "style": "シナリオ",
            "type": "単一選択",
            "question": "【適用】リリース判定と残存バグ。\nリリース判定会議において、重大ではないが修正しきれなかったバグが数件残っていることが報告された。\nビジネス上の理由でリリース日は動かせない場合、テストマネージャが提示すべき案はどれか。",
            "options": [
                "残存バグのリスク（発生頻度や影響）を整理し、ステークホルダー（ビジネス側・運用側）と合意の上で「既知の不具合（Known Issues）」としてリリースを承認してもらう",
                "独断でバグをクローズする",
                "バグが残っているのでリリースを拒否する",
                "開発者に徹夜で直させる"
            ],
            "answer": [
                "残存バグのリスク（発生頻度や影響）を整理し、ステークホルダー（ビジネス側・運用側）と合意の上で「既知の不具合（Known Issues）」としてリリースを承認してもらう"
            ],
            "explanation": "【解説】\n全バグ修正が不可能な場合、「既知の不具合」としてリスクを受容（Accept）し、回避策を準備してリリースするのが現実的な対応です。",
            "tags": ["第1章", "一般", "シナリオ", "K3"]
        }
    ],
    # 6. ch1_general_vol8.json
    "ch1_general_vol8.json": [
        {
            "id": "Q1-GEN-V8-01",
            "chapter": "第1章",
            "level": "K3",
            "category": "一般",
            "style": "シナリオ",
            "type": "単一選択",
            "question": "【適用】ツール導入のパイロット運用。\n全社的なテスト管理ツールの導入を計画しているが、現場からの抵抗が予想される。\nスムーズな導入を進めるためのアプローチとして適切なものはどれか。",
            "options": [
                "組織全体に展開する前に、小規模な範囲でツールの適合性やプロセスへの影響を確認し、運用ルールを確立する",
                "ツールベンダーとの価格交渉を有利に進めるため、全社一括導入の契約を先に結ぶ",
                "ツールの機能（スペック）検証のみを行い、実際の業務プロセスとの適合性は考慮しない",
                "テスト担当者の空き時間を利用して、マニュアルを読ませるだけの学習期間とする"
            ],
            "answer": [
                "組織全体に展開する前に、小規模な範囲でツールの適合性やプロセスへの影響を確認し、運用ルールを確立する"
            ],
            "explanation": "【解説】\nいきなり全社展開せず、パイロットプロジェクトで効果と課題を検証し、成功事例を作ってから展開するのが定石です。",
            "tags": ["第1章", "一般", "シナリオ", "K3"]
        }
    ],
    # 7. ch1_general_vol81.json
    "ch1_general_vol81.json": [
        {
            "id": "Q1-GEN-V81-02",
            "chapter": "第1章",
            "level": "K3",
            "category": "一般",
            "style": "シナリオ",
            "type": "単一選択",
            "question": "【適用】リスク転嫁（Risk Transfer）。\n自社で運用しているサーバーのハードウェア障害リスクを軽減したいと考えている。\n「リスク転嫁」のアプローチに該当する対策はどれか。",
            "options": [
                "クラウドサービス（AWS等）を利用し、SLA（稼働率保証）による金銭的補償や、専門家による運用代行を受ける契約を結ぶ",
                "負荷分散装置（ロードバランサ）を導入してリスク発生確率を下げる",
                "ダウンしても良いようにユーザー規約を変更する",
                "リスクを無視する"
            ],
            "answer": [
                "クラウドサービス（AWS等）を利用し、SLA（稼働率保証）による金銭的補償や、専門家による運用代行を受ける契約を結ぶ"
            ],
            "explanation": "【解説】\n保険への加入やアウトソーシング、クラウド利用（SLA）などは、リスクを他者（第三者）に移転・共有する「転嫁」のアプローチです。",
            "tags": ["第1章", "一般", "シナリオ", "K3"]
        }
    ],
    # 8. ch2_finance.json
    "ch2_finance.json": [
        {
            "id": "Q2-FIN-02",
            "chapter": "第2章",
            "level": "K3",
            "category": "金融",
            "style": "シナリオ",
            "type": "単一選択",
            "question": "【適用】帳票テストの観点。\n銀行の窓口端末から出力される「残高証明書」のテストを行う。\n金融システム特有の品質観点として、特に注意して検証すべき項目はどれか。",
            "options": [
                "数値の正確性はもちろん、ATM等での紙詰まりを防ぐための印字位置ズレがないこと",
                "帳票のデザインが最新の流行的で、色彩豊かであること",
                "使用する用紙の質感が高級であり、顧客に好印象を与えること",
                "印刷にかかる時間が極めて短く、プリンタのスペックを最大限に引き出せていること"
            ],
            "answer": [
                "数値の正確性はもちろん、ATM等での紙詰まりを防ぐための印字位置ズレがないこと"
            ],
            "explanation": "【解説】\n金融帳票では、金額の正確さは当然として、機械処理（OCRやATM）される場合の位置ズレ（物理的な整合性）が致命的なエラーにつながるため重要です。",
            "tags": ["第2章", "金融", "シナリオ", "K3"]
        }
    ],
    # 9. ch2_general_vol14.json
    "ch2_general_vol14.json": [
        {
            "id": "Q2-GEN-V14-02",
            "chapter": "第2章",
            "level": "K3",
            "category": "一般",
            "style": "シナリオ",
            "type": "単一選択",
            "question": "【適用】テスト自動化のデザインパターン。\n画面要素の変更に強い自動テストコードを書くための、最も代表的なデザインパターンはどれか。",
            "options": [
                "Page Object Model (POM) パターンを導入し、画面要素の定義（セレクタ）をページごとのクラスに隠蔽・集約する",
                "報告せずにこっそりと修正し、記録に残さない",
                "テストコード内にIDを直書きする",
                "画像認識でテストする"
            ],
            "answer": [
                "Page Object Model (POM) パターンを導入し、画面要素の定義（セレクタ）をページごとのクラスに隠蔽・集約する"
            ],
            "explanation": "【解説】\nPOMパターンは、画面操作とテストロジックを分離し、メンテナンス性を高めるための標準的な手法です。",
            "tags": ["第2章", "一般", "シナリオ", "K3"]
        }
    ],
    # 10. ch2_general_vol22.json
    "ch2_general_vol22.json": [
        {
            "id": "Q2-GEN-V22-01",
            "chapter": "第2章",
            "level": "K3",
            "category": "一般",
            "style": "シナリオ",
            "type": "単一選択",
            "question": "【適用】静的解析ツールの運用。\n静的解析ツールを導入したが、誤検知（False Positive）が多く、開発者が警告を無視し始めている。\n形骸化を防ぐための運用ルールとして適切なものはどれか。",
            "options": [
                "ツールのルールセットをチューニングし、プロジェクトの文脈に合わないルールを無効化する。また、どうしても発生する誤検知にはコード内で「抑制コメント（Suppress Warning）」を付ける運用ルールを定め、警告数ゼロを目指せる状態にする",
                "「誤検知も含めて全て修正せよ」と命令し、修正完了までビルドをブロックする",
                "警告を無視してビルドを通すために、CIパイプラインの静的解析ステップを一時的に無効化する",
                "警告レベルを全て「情報（Info）」に下げ、開発者の目に触れないようにする"
            ],
            "answer": [
                "ツールのルールセットをチューニングし、プロジェクトの文脈に合わないルールを無効化する。また、どうしても発生する誤検知にはコード内で「抑制コメント（Suppress Warning）」を付ける運用ルールを定め、警告数ゼロを目指せる状態にする"
            ],
            "explanation": "【解説】\n警告放置（割れ窓理論）を防ぐには、「警告が出ている＝異常」という状態を維持することが重要です。そのためにはルールのチューニングと例外の明示的な抑制が必要です。",
            "tags": ["第2章", "一般", "シナリオ", "K3"]
        }
    ],
    # 11. ch2_general_vol71.json & vol72.json (重複気味ですが個別生成)
    "ch2_general_vol71.json": [
        {
            "id": "Q2-GEN-V71-01",
            "chapter": "第2章",
            "level": "K3",
            "category": "一般",
            "style": "シナリオ",
            "type": "単一選択",
            "question": "【適用】テストツールの導入と管理。\nオープンソースのテストツールを導入したが、管理者が不在でバージョンもバラバラ、使い方も個人任せになっている。\n組織としてツールを有効活用するために、まず行うべきアクションはどれか。",
            "options": [
                "ツールの管理者（Administrator）を任命し、使用方法、格納場所、命名規則などの運用ルールを決定する",
                "ツールのソースコードを書き換える",
                "ツールを廃棄する",
                "ツールのバックアップを取る"
            ],
            "answer": [
                "ツールの管理者（Administrator）を任命し、使用方法、格納場所、命名規則などの運用ルールを決定する"
            ],
            "explanation": "【解説】\nツールは導入して終わりではありません。管理者（オーナー）を決め、運用ルールを定めることで初めて組織的な資産となります。",
            "tags": ["第2章", "一般", "シナリオ", "K3"]
        }
    ],
    "ch2_general_vol72.json": [
        {
            "id": "Q2-GEN-V72-01",
            "chapter": "第2章",
            "level": "K3",
            "category": "一般",
            "style": "シナリオ",
            "type": "単一選択",
            "question": "【適用】テストツールの導入と管理（再掲）。\n（※注：内容はvol71と同様の修正です）\n組織としてツールを有効活用するために、まず行うべきアクションはどれか。",
            "options": [
                "ツールの管理者（Administrator）を任命し、使用方法、格納場所、命名規則などの運用ルールを決定する",
                "ツールのソースコードを書き換える",
                "ツールを廃棄する",
                "ツールのバックアップを取る"
            ],
            "answer": [
                "ツールの管理者（Administrator）を任命し、使用方法、格納場所、命名規則などの運用ルールを決定する"
            ],
            "explanation": "【解説】\n管理者の任命とルールの策定が最優先です。",
            "tags": ["第2章", "一般", "シナリオ", "K3"]
        }
    ],
    # 13. ch2_general_vol82.json
    "ch2_general_vol82.json": [
        {
            "id": "Q2-GEN-V82-02",
            "chapter": "第2章",
            "level": "K3",
            "category": "一般",
            "style": "シナリオ",
            "type": "単一選択",
            "question": "【適用】レビューの参加者選定。\n要件定義書のインスペクションを行うことになった。\n欠陥を効率的に発見し、手戻りを防ぐために、レビュー参加者（インスペクター）として招待すべき適切なメンバー構成はどれか。",
            "options": [
                "レビュー対象に対して適切な知識を持つ、多様な視点（テスター、ユーザー、運用者等）に立つ人々を参加させる",
                "参加者全員が同じ視点（開発者視点のみ等）を持つようにする",
                "参加者をできるだけ少なくして、短時間で終わらせる",
                "偉い人だけを呼ぶ"
            ],
            "answer": [
                "レビュー対象に対して適切な知識を持つ、多様な視点（テスター、ユーザー、運用者等）に立つ人々を参加させる"
            ],
            "explanation": "【解説】\nレビューの効果は「視点の多様性」に依存します。異なるバックグラウンドを持つメンバーが参加することで、死角をなくすことができます。",
            "tags": ["第2章", "一般", "シナリオ", "K3"]
        }
    ],
    # 14. ch2_general_vol84.json
    "ch2_general_vol84.json": [
        {
            "id": "Q2-GEN-V84-01",
            "chapter": "第2章",
            "level": "K3",
            "category": "一般",
            "style": "シナリオ",
            "type": "単一選択",
            "question": "【適用】レガシーコードへの静的解析導入。\n既存の大量のコードに対して静的解析ツールを適用したところ、数万件の警告が出てしまい、開発チームが対応を拒否している。\n現実的な導入アプローチとして正しいものはどれか。",
            "options": [
                "「新規作成・変更したコード」のみをチェック対象とし、レガシーコードは対象外とする（またはベースラインとして許容する）運用フローを確立する",
                "ツール導入を中止する",
                "警告を無視する設定にする",
                "開発者に残業して全修正させる"
            ],
            "answer": [
                "「新規作成・変更したコード」のみをチェック対象とし、レガシーコードは対象外とする（またはベースラインとして許容する）運用フローを確立する"
            ],
            "explanation": "【解説】\n「ラチェット効果（悪くしない）」を狙います。過去の負債は一旦棚上げし、新規コードの品質を担保することから始めるのが定石です。",
            "tags": ["第2章", "一般", "シナリオ", "K3"]
        }
    ],
    # 15. ch2_general_vol95.json
    "ch2_general_vol95.json": [
        {
            "id": "Q2-GEN-V95-01",
            "chapter": "第2章",
            "level": "K3",
            "category": "一般",
            "style": "シナリオ",
            "type": "単一選択",
            "question": "【理解】データ駆動とキーワード駆動の違い。\nテスト自動化のアーキテクチャである「データ駆動テスト」と「キーワード駆動テスト」の説明として、正しい組み合わせはどれか。",
            "options": [
                "データ駆動は「入力値と期待値」を外部ファイルに分離する手法であり、キーワード駆動は「操作（アクション）」をキーワードとして定義し、スクリプトから詳細な手順を隠蔽する手法である",
                "報告せずにこっそりと修正し、記録に残さない",
                "両者は同じ意味である",
                "データ駆動は手動テスト用、キーワード駆動は自動テスト用である"
            ],
            "answer": [
                "データ駆動は「入力値と期待値」を外部ファイルに分離する手法であり、キーワード駆動は「操作（アクション）」をキーワードとして定義し、スクリプトから詳細な手順を隠蔽する手法である"
            ],
            "explanation": "【解説】\nデータ駆動は「データ」を外出しにし、キーワード駆動は「操作」を抽象化（外出し）する手法です。",
            "tags": ["第2章", "一般", "シナリオ", "K3"]
        }
    ],
    # 16. ch3_cloud_vol7.json
    "ch3_cloud_vol7.json": [
        {
            "id": "Q3-CLD-V7-01",
            "chapter": "第3章",
            "level": "K3",
            "category": "クラウド",
            "style": "シナリオ",
            "type": "単一選択",
            "question": "【適用】SRE（Site Reliability Engineering）の導入。\n運用チームが「開発者の尻拭い」で疲弊しており、開発チームとの対立が深まっている。\nSREの原則に基づき、健全な関係と信頼性を構築するためのアクションはどれか。",
            "options": [
                "「SREは運用代行屋ではなく、信頼性向上のためのプラットフォーム提供者である」という役割定義を明確にし、開発チームにオンコール対応（持ち回り）の一部を移譲する",
                "開発チームがインフラに触れないよう権限を剥奪し、SREチームだけがリリース作業を行えるようにする",
                "SREチームが開発チームの代わりに全てのアラート対応と障害復旧を行い、開発者がコード書きに専念できるようにする",
                "品質低下を受け入れ、エラーバジェットの目標値を極端に低く設定し直す"
            ],
            "answer": [
                "「SREは運用代行屋ではなく、信頼性向上のためのプラットフォーム提供者である」という役割定義を明確にし、開発チームにオンコール対応（持ち回り）の一部を移譲する"
            ],
            "explanation": "【解説】\nSREの重要な原則の一つは「運用の責務を共有する（Shared Responsibility）」ことです。開発者も運用（オンコール）に参加することで、信頼性を意識したコードを書くようになります。",
            "tags": ["第3章", "クラウド", "シナリオ", "K3"]
        }
    ],
    # 17. ch3_general_vol11.json
    "ch3_general_vol11.json": [
        {
            "id": "Q3-GEN-V11-01",
            "chapter": "第3章",
            "level": "K3",
            "category": "一般",
            "style": "シナリオ",
            "type": "単一選択",
            "question": "【適用】心理的安全性とバグ報告。\nあるプロジェクトで、ベテラン開発者A氏が、バグを指摘したテスト担当者B氏に対して「こんな些細なことでチケットを切るな」と威圧的に叱責している。\nテストマネージャとして、この状況がプロジェクトに及ぼす最大のリスクと、取るべきアクションはどれか。",
            "options": [
                "心理的安全性が損なわれ、バグ隠蔽のリスクが高まっている。A氏に対し「態度の改善」を業務命令として伝え、チームの行動規範（Code of Conduct）を再定義して「敬意」を必須項目とする",
                "A氏はスキルが高く替えが効かないため、個人の性格の問題として黙認する",
                "報告せずにこっそりと修正し、記録に残さない",
                "B氏のスキル不足が原因であると判断し、B氏に追加のトレーニングを課す"
            ],
            "answer": [
                "心理的安全性が損なわれ、バグ隠蔽のリスクが高まっている。A氏に対し「態度の改善」を業務命令として伝え、チームの行動規範（Code of Conduct）を再定義して「敬意」を必須項目とする"
            ],
            "explanation": "【解説】\n心理的安全性の欠如は、情報の隠蔽という致命的なリスクを招きます。マネージャは毅然とした態度で「敬意（Respect）」のある文化を守る必要があります。",
            "tags": ["第3章", "一般", "シナリオ", "K3"]
        }
    ],
    # 18. ch3_general_vol15.json
    "ch3_general_vol15.json": [
        {
            "id": "Q3-GEN-V15-02",
            "chapter": "第3章",
            "level": "K3",
            "category": "一般",
            "style": "シナリオ",
            "type": "単一選択",
            "question": "【適用】ツールの相互運用性（Interoperability）。\n複数のテストツールや管理ツールを組み合わせて使用する際、ツール選定において特に重視すべき技術的な観点はどれか。",
            "options": [
                "ベンダーロックインの回避と、ツールの相互運用性の確保",
                "大量一括購入によるボリュームディスカウントを狙うため",
                "リスクを受容したことにして、対策を先送りする",
                "ツールの機能重複を許容し、バックアップとして保持する"
            ],
            "answer": [
                "ベンダーロックインの回避と、ツールの相互運用性の確保"
            ],
            "explanation": "【解説】\nエコシステム全体を考える際、ツール間の連携（APIや標準フォーマット）ができるかどうかが重要です。特定ベンダーに依存しすぎると柔軟性が失われます。",
            "tags": ["第3章", "一般", "シナリオ", "K3"]
        }
    ]
}

def regenerate_broken_files():
    print("--- 破損ファイルの一括再生成を開始します ---")
    
    count = 0
    for filename, content in files_data.items():
        file_path = os.path.join(OUTPUT_DIR, filename)
        try:
            with open(file_path, 'w', encoding='utf-8') as f:
                json.dump(content, f, ensure_ascii=False, indent=2)
            print(f"作成完了: {filename}")
            count += 1
        except Exception as e:
            print(f"エラー作成不可: {filename} ({e})")

    print("-" * 30)
    print(f"完了: {count} ファイルを正常なデータで上書きしました。")
    print("エンターキーを押して終了してください...")

if __name__ == "__main__":
    regenerate_broken_files()
    input()