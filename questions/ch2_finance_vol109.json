[
  {
    "id": "Q2-FIN-V109-01",
    "chapter": "第2章",
    "level": "K4",
    "category": "金融",
    "style": "シナリオ",
    "type": "単一選択",
    "question": "【分析】金利計算の精度テスト。\n年利計算において、小数点以下の端数処理（切り捨て・四捨五入）で1円の誤差も許されない。\nプログラミング言語の浮動小数点数型（float/double）に起因する誤差（丸め誤差）を検出するためのテスト方針はどれか。",
    "options": [
      "計算結果に1円程度の誤差が出るのはコンピュータの仕様上仕方がないため、許容範囲（±1円）を設けてテストを合格とする",
      "テストデータの期待値を計算する際、Excelや電卓ではなく、高精度な「Decimal型（固定小数点）」を使用したスクリプトで厳密に計算し、システムの実装もDecimal型が使われているかコードレビューとセットで検証する",
      "ランダムな金額で大量に計算させ、結果が「なんとなく正しそう」であればOKとする",
      "金額をすべて整数（Integer）に変換してから計算し、最後に割り算を行うロジックに変更するよう開発者に指示するが、割り算のタイミングでの誤差は考慮しない"
    ],
    "answer": [
      "テストデータの期待値を計算する際、Excelや電卓ではなく、高精度な「Decimal型（固定小数点）」を使用したスクリプトで厳密に計算し、システムの実装もDecimal型が使われているかコードレビューとセットで検証する"
    ],
    "explanation": "【解説】\n金融計算でFloat/Doubleは厳禁です。テスト期待値もDecimalで計算し、1円単位（あるいは銭単位）まで完全に一致することを確認する必要があります。",
    "tags": [
      "第2章",
      "金融",
      "シナリオ",
      "K4"
    ]
  }
]